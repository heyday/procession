/** @license MIT License copyright (c) Heyday */
(function(e){e(["when"],function(e){var t,u;return u=function(e){return"[object Function]"==Object.prototype.toString.call(e)},t=function(){this._resetQueue()},t.prototype={_AddToQueue:function(t,n,o){var i;return o=o||{},i=this._getFirstFromQueue().then(function(i){var r,s;return i=i||{options:{}},o.prevous=i.options,s=u(i.unload)?e(i.unload(o)).yield():e.resolve(),u(t)&&(r=e(t(o,s))),e.all([s,r]).yield({load:t,unload:n,options:o})}),this._addToQueue(i),i},_getFirstFromQueue:function(){return this.__queue.length?this.__queue.shift():e.resolve()},_resetQueue:function(){this.__queue=[]},_addToQueue:function(t){this.__queue.push(e(t))},queue:function(e,t,u){return this._AddToQueue(e,t,u)}},t})})("function"==typeof define?define:function(e,t){this.Procession=t(this.when)});